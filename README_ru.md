# üßÅ–ë–æ—Ç-–ú–µ–Ω—é –¥–ª—è –†–µ—Å—Ç–æ—Ä–∞–Ω–æ–≤ –∏ –ö–∞—Ñ–µ

![Python ver](https://img.shields.io/badge/pyhon-3.10-orange)
![aiogram](https://img.shields.io/badge/aiogram-3.13.1-blue)
![arq](https://img.shields.io/badge/arq-0.26.1-yellow)
![elasticsearch](https://img.shields.io/badge/elasticsearch-8.15.4-green)
![postgres](https://img.shields.io/badge/postgre-16-42a4ff)
![redis](https://img.shields.io/badge/redis-5.2.0-red)

## üß© –¢–∞–±–ª–∏—Ü—ã –ë–î 

> core > config_main > pg_settings.py

#### –ü—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω—ã –ø–æ–ª–Ω—ã–µ —Å—Ö–µ–º—ã —Ç–∞–±–ª–∏—Ü. –ë—ã–ª–∏ —Å–æ—Å—Ç–∞–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ PgAdmin4, –ø–æ—ç—Ç–æ–º—É –Ω–µ –º–æ–≥—É –±—ã—Ç—å —É–≤–µ—Ä–µ–Ω –∑–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–±–Ω–æ—Å—Ç—å –∫–æ–¥–∞ —Ç–∞–±–ª–∏—Ü

> core > data > posgre.py > PgSql

#### –¢–∞–º –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω—ã —Å—Ç–æ–ª–±—Ü—ã –∏ —Ç–∞–±–ª–∏—Ü—ã, –≤ –∫–æ—Ç–æ—Ä—ã—Ö –æ–Ω–∏ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω—ã, –≤ –±–æ–ª–µ–µ –∫—Ä–∞—Ç–∫–æ–º –≤–∏–¥–µ

## üìù –û—Å–Ω–æ–≤–Ω–∞—è –∏–¥–µ—è

–ë–æ—Ç, –≤—ã–ø–æ–ª–Ω—è—é—â–∏–π —Ä–æ–ª—å ```—Ä–µ—Å—Ç–æ—Ä–∞–Ω–Ω–æ–≥–æ –º–µ–Ω—é```, —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é ```–ø–æ–∏—Å–∫–∞ –±–ª—é–¥```

#### –ü—Ä–∏—ë–º ¬´**–Å–ª–æ—á–∫–∞**¬ªüå≤ (–ë–∏–Ω–∞—Ä–Ω—ã–π –ø–æ–∏—Å–∫)
* 1. –ü–æ—Å–µ—Ç–∏—Ç–µ–ª—å –ø–µ—Ä–µ–º–µ—â–∞–µ—Ç—Å—è –ø–æ –≥—Ä—É–ø–ø–∞–º –±–ª—é–¥
* 2. –î–æ–±–∞–≤–ª—è–µ—Ç –∂–µ–ª–∞–µ–º—ã–µ –±–ª—é–¥–∞ –≤ –∑–∞–∫–∞–∑
* 3. –û—Ç–∫—Ä—ã–≤–∞–µ—Ç —Å–æ–±—Ä–∞–Ω–Ω—ã–π –∑–∞–∫–∞–∑
#### üîé–ü–æ–∏—Å–∫ —Å –ø–æ–º–æ—â—å—é Elasticsearch
* 1. –ü–æ—Å–µ—Ç–∏—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç –ø–æ–∏—Å–∫–æ–≤–æ–π –∑–∞–ø—Ä–æ—Å
* 2. –ü—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–∞—è –≤—ã–¥–∞—á–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤, –ø–æ–¥–µ–ª—ë–Ω–Ω—ã—Ö –Ω–∞ –≥—Ä—É–ø–ø—ã

## –ú–µ–Ω—é üçΩ

#### –í—ã–±–æ—Ä –±–ª—é–¥–∞ —Ä–∞–∑–±–∏—Ç –Ω–∞ 2-3 –≥—Ä—É–ø–ø—ã. –ö–æ–º–º–∞–Ω–¥–∞ `/menu` 

![1lvl](https://sun9-33.userapi.com/impg/MwjDb8iSoMrVmNNL9wRqXt7JUr0c_UIurLlC5w/urvx8tNRKP8.jpg?size=1223x243&quality=95&sign=5110a58085f9c1369838a412163b9576&type=album)


### –ï—Å–ª–∏ –≤—ã–±–∏—Ä–∞—é—Ç ¬´–†–æ–ª–ª—ãüç±¬ª –∏–ª–∏ ¬´–ó–∞–∫—É—Å–∫–∏ü•™¬ª
![2lvl](https://sun36-2.userapi.com/impg/COahWfHPVD0OvUsfvx9EtmWjQ4CRp2_VDZTzUA/YuTL16RQn7w.jpg?size=1221x118&quality=95&sign=e6ad87b5f959b075bb731b7a9bfd6a24&type=album)

### –í—ã–¥–∞—á–∞ üõÑ
![extradition](https://sun9-35.userapi.com/impg/JPnQBKcY7FS8KPmPOo3w1U0gHeYPTEiKGC_09g/xcsbduhng5I.jpg?size=689x867&quality=95&sign=615aa6940440a69e7ba6e7ae92aa4cca&type=album)

## üé≤ –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å –±–ª—é–¥–∞–º–∏ 

#### –¢—ã –º–æ–∂–µ—à—å ```–¥–æ–±–∞–≤–∏—Ç—å``` –µ–≥–æ ```–≤ –∫–æ—Ä–∑–∏–Ω—É```, –ø–æ—Å–ª–µ —á–µ–≥–æ –≤—ã–±—Ä–∞—Ç—å ```–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –±–ª—é–¥('+', '-')``` 
![CRD(shorted CRUD)](introduction_intrctn.gif)

#### –í—Å—ë, —á—Ç–æ —Ç—ã –¥–æ–±–∞–≤–∏—à—å –≤ –∑–∞–∫–∞–∑, –º–æ–∂–Ω–æ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø–æ –∫–æ–º–∞–Ω–¥–µ ```/my_order```
![order](https://sun9-37.userapi.com/impg/N5gXPgHYbMvjFuVRParxS2Em552lLytcZO6H6Q/-Rty5_3AyEg.jpg?size=598x237&quality=95&sign=1f15b7cb5724763a720e8dbaa8bbc4ce&type=album)

## ‚è±Ô∏è –ó–∞–¥–∞—á–∞ arq –≤ –ø—Ä–æ–µ–∫—Ç–µ

> core > menu > menu_3lvl.py > arq_run()

1. –í–µ—Å—å –∑–∞–∫–∞–∑ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Ä–µ–¥–∏—Å–µ –≤ —Å–æ–æ–±—Ä–∞–∂–µ–Ω–∏—è—Ö –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
2. –ó–∞–∫–∞–∑ –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç—Å—è –≤ –ë–î –≤ –∫–æ–Ω—Ü–µ —Ä–∞–±–æ—á–µ–≥–æ –¥–Ω—è –∑–∞–≤–µ–¥–µ–Ω–∏—è, –∫–æ–≥–¥–∞ –ø–æ—Å–µ—Ç–∏—Ç–µ–ª–∏ —É–∂–µ —É—à–ª–∏‚è∞

–≠—Ç–æ –∏ –±—ã—Å—Ç—Ä–æ, –∏ –∑–∞–∫–∞–∑ –≤—Å–µ–≥–¥–∞ –¥–æ—Å—Ç–ø—É–µ–Ω. –ë–î –Ω–µ –Ω–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –ø–æ—Å—Ç–æ—è–Ω–Ω—ã–º–∏ –ê–ü–î–ï–ô–¢-–∑–∞–ø—Ä–æ—Å–∞–º–∏

```python
hour, minute, second = now.hour - 2, now.minute, now.second
now_in_seconds = 3600 * hour + 60 * minute + second

ttl = day - now_in_seconds
await redis.set(f'_{chat_id}', data)
await arq.enqueue_job('redis_save_n_flush',
                      _defer_by=timedelta(seconds=ttl-300),
                      chat_id=chat_id)
```

## –ò—Å—Ç–æ—Ä–∏—è –∑–∞–∫–∞–∑–æ–≤

> core > orders_history.py

#### –ü—Ä–æ—Å—Ç–æ —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ –∑–∞–∫–∞–∑—ã, –≤—ã–¥–∞–≤–∞–µ–º—ã–µ —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ –≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è–º–∏üïò. –ö–æ–º–∞–Ω–¥–∞ `/orders_history`
![orders history](https://sun9-9.userapi.com/impg/mdXOOuaT5h29WEaH1iWnxRmO5akWcDhEf-AzJA/SBV0DH38zks.jpg?size=466x470&quality=95&sign=1ad3d1bef994f40fcee9d11b7a193937&type=album) 

## üîé –ü–æ–∏—Å–∫

> core > searching

#### –ü–æ –∑–∞–ø—Ä–æ—Å—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≥—Ä—É–ø–ø–∞–º–∏ –≤—ã–¥–∞—é—Ç—Å—è –¥–æ–∫—É–º–µ–Ω—Ç—ãüìò –∏–∑ Elasticsearch, —Å –ø–æ–¥—Ö–æ–¥—è—â–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏. –ü–æ–∏—Å–∫ –≤–µ–¥—ë—Ç—Å—è –ø–æ –ù–∞–∑–≤–∞–Ω–∏—é –∏ –û–ø–∏—Å–∞–Ω–∏—é. –ú–∞–ø–ø–∏–Ω–≥ –∏–Ω–¥–µ–∫—Å–∞üß∂ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω –ø–æ –ø—É—Ç–∏ `> core > config_main > index_settings.py`

#### –ü–æ–∏—Å–∫–æ–≤–æ–π –ø–∞—Ç—Ç–µ—Ä–Ω –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ `./search_pattern.py`

#### –ö–æ–º–∞–Ω–¥–∞ `/search`
![searching](https://sun9-52.userapi.com/impg/5pqCJLSDLN_sPjLKZjW2iw-PChimtSnKFzdzdQ/Rk2wVUIdhEA.jpg?size=603x740&quality=95&sign=0819d4a3183e5c5016bd3031d9541b33&type=album)

## –°–ø–∞—Å–∏–±–æ –∑–∞ –ø—Ä–æ—á—Ç–µ–Ω–∏–µ! ‚ú®üòá
